<html>
<head>
<title>ezFCPlib - Easy FCP API for Freenet C/C++ Clients</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body bgcolor="#FFFFFF" text="#000000">
<hr>
<p><font face="Arial, Helvetica, sans-serif"><b><font size="7">ezFCPlib</font><font size="4"><br>
  An Easy-to-use API for Freenet C/C++ Clients<font size="5"><br>
  </font></font></b><font size="4"><i>Reference Manual<br>
  </i></font></font></p>
<p><font face="Arial, Helvetica, sans-serif" size="4"><b>Contents</b></font></p>
<ul>
  <li><font face="Arial, Helvetica, sans-serif" size="4"><a href="#introduction"><font color="#339900">Introduction</font></a></font></li>
  <li><font face="Arial, Helvetica, sans-serif" size="4"><a href="#requiredheaders"><font color="#339900">Required 
    Headers</font></a><br>
    <br>
    </font></li>
  <li><font face="Arial, Helvetica, sans-serif" size="4"><a href="#establishment"><font color="#339900">Establishment/Housekeeping 
    Functions</font></a></font></li>
  <li><font face="Arial, Helvetica, sans-serif" size="4"><a href="#highlevel"><font color="#339900">High-Level 
    Freenet Key I/O Functions</font></a></font></li>
  <li><font face="Arial, Helvetica, sans-serif" size="4"><a href="#keyindex"><font color="#339900">In-Freenet 
    Key Index Functions</font></a></font></li>
  <li><font face="Arial, Helvetica, sans-serif" size="4"><a href="#keycreation"><font color="#339900">Key 
    Creation Functions</font></a></font></li>
  <li><font face="Arial, Helvetica, sans-serif" size="4"><a href="#lowlevel"><font color="#339900">Low 
    Level Key Streaming Functions</font></a></font></li>
</ul>
<ul>
  <li><font face="Arial, Helvetica, sans-serif" size="4"><a href="#requiredclientcallbackfunction"><font color="#FF0000">Required 
    Client Logging Callback Function</font></a></font><font face="Arial, Helvetica, sans-serif" size="4"><br>
    </font></li>
</ul>
<ul>
  <li><font face="Arial, Helvetica, sans-serif" size="4"><a href="#errors"><font color="#339900">Error 
    Code Descriptions</font></a><br>
    <br>
    </font></li>
  <li><font face="Arial, Helvetica, sans-serif" size="4"><a href="#demo"><font color="#339900">Demo 
    Program</font></a></font></li>
</ul>
<p>&nbsp;</p>
<hr>
<p><font face="Arial, Helvetica, sans-serif"><b><font size="4"><a name="introduction"></a><br>
  Introduction</font></b></font></p>
<p><font face="Arial, Helvetica, sans-serif">This document describes <b>ezFCPlib</b>, 
  an API library for Freenet clients written in C or C++.</font></p>
<p></p>
<p><font face="Arial, Helvetica, sans-serif">For Windows programmers, starting 
  out with programming to Freenet can be daunting, to say the least. It certainly 
  was for me. As a programmer who (due to a very welcome career change) hadn't 
  coded for 7 years, I was very rusty. Worse, I had virtually no Windows API experience 
  whatsoever.</font></p>
<p><font face="Arial, Helvetica, sans-serif">I wish a library like this had been 
  available when I'd started learning Freenet. It would have saved me countless 
  frustrating hours.</font></p>
<p><font face="Arial, Helvetica, sans-serif">Hopefully <b>ezFCPlib</b> will save 
  you from suffering similar frustrations. Many programmers want to concentrate 
  on user aspects of their programs - look-n-feel, interaction, features etc, 
  without having to be dragged through the low-level entrails of the system they're 
  coding to. It is especially for such programmers that this API is written.</font></p>
<p><font face="Arial, Helvetica, sans-serif">I hope you find <b>ezFCPlib</b> to 
  be simple and intuitive, fast to learn and understand, yet robust and flexible.<br>
  Have fun.</font></p>
<p><font face="Arial, Helvetica, sans-serif">Kind Regards<br>
  David McNab<br>
  <a href="mailto:david@rebirthing.co.nz">david@rebirthing.co.nz</a> </font></p>
<p>&nbsp;</p>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><font size="4"><a name="requiredheaders"></a></font></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><font size="4">1. Required Headers</font></b></font></p>
<ul>
  <li><font face="Arial, Helvetica, sans-serif"><font size="4" color="#339900">ezfcplib.h</font><b><font size="4" color="#339900"> 
    <font color="#000000">- </font></font></b><font color="#339900"><font color="#000000"> 
    all required constants, function prototypes, type definitions</font></font></font> 
  </li>
</ul>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><font size="4"><a name="establishment"></a></font></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><font size="4">2. Establishment/Housekeeping 
  Funtions</font></b></font></p>
<ul>
  <li><font size="4" face="Arial, Helvetica, sans-serif"><a href="#startup"><font color="#339900">fcpStartup</font></a></font><font face="Arial, Helvetica, sans-serif"> 
    - Initialises the Freenet FCP interface, and does a test handshake</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#createhandle"><font size="4" color="#339900">fcpCreateHandle</font></a> 
    - create an FCP 'handle', needed for subsequent operations</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><font size="4"><a href="#destroyhandle"><font size="4" color="#339900">fcpDestroyHandle</font></a> 
    - </font>destroys an FCP handle</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><font size="4"><a href="#sethtl"><font color="#339900">fcpSetHtl</font></a></font> 
    - sets an FCP handle's Hops To Live</font></li>
  <li><font face="Arial, Helvetica, sans-serif" size="4"><a href="#rawmode"><font color="#339900">fcpRawMode</font></a></font><font face="Arial, Helvetica, sans-serif"> 
    - sets or resets automatic metadata handling</font></li>
</ul>
<hr>
<font face="Arial, Helvetica, sans-serif"><a name="highlevel"></a></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><font size="4">3. High-Level Freenet 
  Key I/O Functions</font></b></font></p>
<ul>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#getkeytomem"><font size="4" color="#339900">fcpGetKeyToMem</font></a> 
    - reads a key and its metadata into memory</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#putkeyfrommem"><font size="4" color="#339900">fcpPutKeyFromMem</font></a> 
    - write a key and/or metadata from memory</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#getkeytofile"><font size="4" color="#339900">fcpGetKeyToFile</font></a> 
    - reads a key and saves it to a file</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#putkeyfromfile"><font size="4" color="#339900">fcpPutKeyFromFile</font></a> 
    - inserts the contents of a file into Freenet</font></li>
</ul>
<hr>
<font face="Arial, Helvetica, sans-serif"><a name="keyindex"></a></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><font size="4">4. In-Freenet Key 
  Index Functions</font></b></font></p>
<ul>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#openkeyindex"><font size="4" color="#339900">fcpOpenKeyIndex</font></a> 
    - opens an in-freenet key index for reading</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#readkeyindex"><font size="4" color="#339900">fcpReadKeyIndex</font></a> 
    - reads the next key from the key index</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#writekeyindex"><font size="4" color="#339900">fcpWriteKeyIndex</font></a> 
    - writes an entry to an in-Freenet key index</font></li>
</ul>
<hr>
<font face="Arial, Helvetica, sans-serif"><a name="keycreation"></a></font> 
<p><font face="Arial, Helvetica, sans-serif"><font size="4"><b>5. Key Creation 
  Functions</b></font></font></p>
<ul>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#makechkfrommem"><font size="4" color="#339900">fcpMakeChkFromMem</font></a> 
    - Creates a CHK value from data in memory</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#makechkfromfile"><font size="4" color="#339900">fcpMakeChkFromFile</font></a> 
    - Creates a CHK value from data in a file</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#makesvkkeypair"><font size="4" color="#339900">fcpMakeSvkKeypair</font></a> 
    - Generates an SVK keypair</font></li>
</ul>
<hr>
<font face="Arial, Helvetica, sans-serif"><a name="lowlevel"></a></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><font size="4">6. Low Level Key 
  Streaming Functions</font></b></font></p>
<ul>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#openkey"><font size="4" color="#339900">fcpOpenKey</font></a> 
    - Opens a key for reading or writing</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#closekey"><font size="4" color="#339900">fcpCloseKey</font></a> 
    - Closes a previously open key</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#readkey"><font size="4" color="#339900">fcpReadKey</font></a> 
    - Reads an arbitrary number of bytes from a key</font></li>
  <li><font face="Arial, Helvetica, sans-serif"><a href="#writekey"><font size="4" color="#339900">fcpWriteKey</font></a> 
    - Writes an arbitrary number of bytes to a key</font></li>
</ul>
<p>&nbsp;</p>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><font size="5">Establishment/Housekeeping 
Functions</font></b></font> 
<hr>
<p><font face="Arial, Helvetica, sans-serif"><a name="startup"></a><br>
  <font size="3"><font size="4"><font color="#3300FF">int</font> </font><font size="4" color="#339900">fcpStartup</font><font size="4">(<font color="#3300FF">char</font> 
  <font color="#000000">*<i>host</i></font>, <font color="#3300FF">int</font> 
  </font><font size="4" color="#000000"><i>port</i>,</font><font size="4"> <font color="#3300FF">int</font> 
  </font><font size="4" color="#000000"><i>defaultHtl, </i><font color="#3300FF">int</font> 
  <i>rawMode</i></font><font size="4">)</font></font></font></p>
<p><font face="Arial, Helvetica, sans-serif"><b>Brief</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Starts up FCP interface, and handshakes 
    with Freenet node.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Arguments</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif"><i><b>host</b> </i>- ASCII string 
    containing an internet hostname. This can be a domain name, or IP address 
    string such as &quot;12.212.33.5&quot;. If this argument is NULL, the host 
    defaults to the local machine.</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>port</i></b> - port number 
    on which Freenet is listening for FCP connections. Set this to zero to use 
    the default FCP port number <b>8082</b>.</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>defaultHtl</i></b> - default 
    value to set for Hops To Live. Normal settings for <b><i>htl</i></b> are between 
    10 and 100. For writing to Freenet, this determines how deeply a key is inserted 
    into Freenet.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">Lower values result in faster inserts, 
    but inserted keys are less likely to be found by other nodes requesting them. 
    High values can cause inserts to take up to an hour or more.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">For reading from Freenet, this 
    determines how deeply to search into Freenet for the required key. Shorter 
    values result in faster requests, but have a higher risk of failure with finding 
    keys, especially new or unpopular keys.</font></p>
  <p><b><i><font face="Arial, Helvetica, sans-serif">rawMode</font></i></b><font face="Arial, Helvetica, sans-serif"> 
    - by default, all incoming metadata is handled automatically, so that redirects 
    are followed transparently.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Return Value</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif"><b>0</b> if successful, non-zero 
    otherwise (see <a href="#errors">Error Codes</a>)</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Description</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">This function should be called 
    by the application's main thread as soon as possible after calling the required 
    <a href="http://msdn.microsoft.com/library/wcedoc/wcecomm/winsock_13.htm">WSAStartup()</a> 
    function (refer Windows API docs on sockets)</font></p>
</blockquote>
<hr>
<p><font face="Arial, Helvetica, sans-serif"><a name="createhandle"></a><br>
  <font size="4"><font color="#3300FF">HFCP *</font></font></font><font color="#339900" face="Arial, Helvetica, sans-serif"><font size="4">fcpCreateHandle</font></font><font face="Arial, Helvetica, sans-serif"><font size="4">()</font></font></p>
<p><font face="Arial, Helvetica, sans-serif"><b>Brief</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Creates an FCP 'handle', needed 
    for subsequent FCP operations.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Arguments</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">None</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Return Value</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">If successful, a pointer to an 
    &quot;<b>FCP Handle</b>&quot;, which is needed in all future operations on 
    Freenet.<br>
    If failed, <b>NULL</b> is returned.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Description</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">An FCP handle is much like a <b>FILE 
    *</b> pointer, used with fopen(), fprintf() etc. You need an FCP handle before 
    you can do anything with Freenet.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">This function must not be called 
    unless the calling process has already successfully called <font color="#339900">fcpCreate()</font>. 
    <font color="#000000">If you don't abide by this, the results will be unpredictable 
    and potentially dangerous to your system.</font> Worse, such effects can prove 
    very hard to debug.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">Like <b>FILE *</b> handles, FCP 
    handles can only operate on one Freenet key at a time. If you want to work 
    with two or more keys at once, you will need to create that number of FCP 
    handles.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">However, after you've finished 
    working with a Freenet key, you don't have to destroy this handle. You can 
    simply use it again and again, only destroying it when you're really finished 
    with it.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">Note that these FCP handles are 
    not necessarily intended to be created on a per-thread basis (although you're 
    free to do this, and it may be the most convenient way for you). It's quite 
    OK for a single thread to work with several handles, or even several threads 
    to share the one handle (as long as they don't collide from simultaneously 
    doing operations on that one handle).</font></p>
</blockquote>
<hr>
<p><font face="Arial, Helvetica, sans-serif"><a name="destroyhandle"></a><br>
  <font size="4" color="#3300FF">void </font></font><font color="#339900" face="Arial, Helvetica, sans-serif"><font size="4">fcpDestroyHandle</font></font><font face="Arial, Helvetica, sans-serif"><font size="4">(<font color="#3300FF">HFCP 
  *</font><i>hfcp</i>)</font></font></p>
<p><font face="Arial, Helvetica, sans-serif"><b>Brief</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Destroys an FCP handle that's no 
    longer needed.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Arguments</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif"><b><i>hfcp</i></b> - pointer to 
    an existing FCP handle.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Returns</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Nothing.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Description</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Frees up all dynamically-allocated 
    memory resources used within an FCP handle, and destroys the FCP handle itself. 
    If <b><i>hfcp</i></b> does not point to a valid FCP handle, calling this function 
    will have unpredictable and dangerous results.</font></p>
</blockquote>
<hr>
<p><font face="Arial, Helvetica, sans-serif"><font size="4"><b><a name="sethtl"></a><br>
  </b><font color="#3300FF">void </font></font></font><font color="#339900" face="Arial, Helvetica, sans-serif"><font size="4">fcpSetHtl</font></font><font face="Arial, Helvetica, sans-serif"><font size="4">(<font color="#3300FF">HFCP 
  *</font><i>hfcp</i>, <font color="#3300FF">int</font> <i>htl</i>)</font></font></p>
<p><font face="Arial, Helvetica, sans-serif"><b>Brief</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Sets a different HTL value for 
    an individual FCP handle.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Arguments</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif"><b><b><i>hfcp</i></b> - </b>pointer 
    to an existing FCP handle.</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>htl</i></b> - Hops To Live 
    value to set for this handle</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Returns</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Nothing.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Description</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">When you called <a href="#startup">fcpStartup()</a>, 
    you chose a 'default HTL' value. This will set the HTL for all FCP handles 
    you subsequently create.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">But there may be times when you 
    will want to set different HTL values for different FCP handles.<b> </b>That's 
    what this function is for.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">HTL values should ideally be between 
    10 and 100. If the value is too low, any Freenet operations will barely scratch 
    the surface of Freenet, and are apt to fail. However, they are fast. On the 
    other hand, Freenet operations with high HTL values take a long time to complete, 
    perhaps several minutes to an hour or even several hours, but give much more 
    reliable results.<b><br>
    </b></font></p>
</blockquote>
<hr>
<p><a name="rawmode"></a><br>
<font size="4" color="#3300FF">void</font><font size="4"> <font color="#339900">fcpRawMode</font>(<font color="#3300FF">HFCP</font> 
*<i>hfcp</i>, <font color="#3300FF">int</font> <i>rawMode</i>)</font> 
</p>
<p><b>Brief</b></p>
<blockquote> 
  <p>Enables or disables &quot;<b>raw mode</b>&quot; for a given FCP handle.</p>
</blockquote>
<p><b>Arguments</b></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif"><b><b><i>hfcp</i></b> - </b>pointer 
    to an existing FCP handle.</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b>rawMode </b>- 1 to set the handle 
    into 'raw mode, 0 to disable raw mode.</font></p>
</blockquote>
<p><b><font face="Arial, Helvetica, sans-serif">Returns</font></b></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Nothing</font></p>
</blockquote>
<p><b><font face="Arial, Helvetica, sans-serif">Description</font></b></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">When you called <a href="#startup">fcpStartup()</a>, 
    you may choose to set raw mode, which disables automatic metadata handling 
    for all FCP handles you subsequently create.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">But you may want to enable or disable 
    auto metadata handling selectively for certain handles. That's what this function 
    is for.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"></font></p>
<hr>
<font face="Arial, Helvetica, sans-serif" size="5" color="#000000"><b>High-Level 
Freenet Key I/O Functions</b></font>
<hr>
<p><font face="Arial, Helvetica, sans-serif"><b><a name="getkeytomem"></a><br>
  </b><font size="4" color="#3300FF">int</font><font size="4" color="#339900"> 
  fcpGetKeyToMem</font><font size="4">(<font color="#3300FF">HFCP *<i><font color="#000000">hfcp</font></i></font>, 
  <font color="#3300FF">char *</font><i><font color="#000000">key</font></i>, 
  <font color="#3300FF">char **</font><i><font color="#000000">pData</font></i>, 
  <font color="#3300FF">char **</font><i>pMetadata</i>)</font></font></p>
<p><font face="Arial, Helvetica, sans-serif"><b>Brief</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Read a key and its metadata into 
    memory</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Arguments</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif"><b><i>hfcp</i></b> - an FCP handle, 
    previously created by calling <a href="#createhandle">fcpCreateHandle()</a></font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>key</i></b> - pointer to 
    a char string containing a valid Freenet URI (eg '<a href="http://127.0.0.1:8081/KSK@AARDVARK">freenet:KSK@AARDVARK</a>')</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>pData</i></b> - pointer to 
    a pointer to the received key data (see example below). If this argument is 
    NULL, then the key's data will be discarded</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>pMetadata</i></b> - pointer 
    to a pointer to the received key's metadata (again see example). If this argument 
    is NULL, then the key's metadata will be discarded</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Returns</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Size of the key in bytes if the 
    key was successfully read;<br>
    -1 if there was a failure (see error descriptions).</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Description</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Retrieving a key from Freenet has 
    never been this easy! This function will request a key from Freenet, using 
    the default HTL (see <a href="#startup">fcpStartup()</a> ), or the FCP handle's 
    own HTL (see <a href="#sethtl">fcpSetHtl()</a>).</font></p>
  <p><font face="Arial, Helvetica, sans-serif">If the key can be retrieved, its 
    entire contents and metadata will be written to memory, and locations of the 
    data and metadata will be written to <b><i>pData</i></b><i> </i>and<i> <b>pMetadata</b> 
    </i>respectively.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">Note that the <b><i>pData</i></b> 
    and <b><i>pMetadata </i></b>are <a href="http://msdn.microsoft.com/library/devprods/vs6/visualc/vccore/_crt_malloc.htm">malloc()</a>ed. 
    To prevent memory leaks, you should <a href="http://msdn.microsoft.com/library/devprods/vs6/visualc/vccore/_crt_free.htm">free()</a> 
    them when you're finished with them.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">It's quite acceptable to supply 
    NULL pointers for both these arguments - this is a handy way to find out if 
    a given key exists on Freenet.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">As regards Freenet metadata - metadata 
    commands like redirects, date-based redirects and file splits are handled 
    automagically and transparently.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">CAUTION - be careful with this 
    function. Some Freenet keys can be up to a gigabyte or more in size. Using 
    this function to retrieve such keys could have interesting effects on your 
    system.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Example</b></font></p>
<blockquote>
  <pre><font face="Arial, Helvetica, sans-serif"><font face="Courier New, Courier, mono">#include &lt;sys/types.h&gt;<br>#include &lt;winsock.h&gt;
#include &quot;<font color="#3300FF">ezfcplib.h</font>&quot;

int main(int argc, char *argv[])
{
	<font color="#3300FF">HFCP *hfcp;</font>		// FCP handle pointer
	char *data;		// for Freenet key's data
	char *metadata;	// for Freenet key's metadata

	// Start up FCP interface
	if (<font color="#3333FF">fcpStartup</font>(&quot;localhost&quot;, 8082, 60) != 0)
	{
		printf(&quot;fcpStartup failed\n&quot;);
		exit(1);
	}

	// Create an FCP handle
	if ((hfcp = <font color="#3300FF">fcpCreateHandle</font>()) == NULL)
	{
		printf(&quot;Failed to create FCP handle\n&quot;);
		return -1;
	}

	// Try to fetch a key
	if (<font color="#3300FF">fcpGetKeyToMem</font>(hfcp, &quot;KSK@AARDVARK&quot;, &amp;data, &amp;metadata) != 0)
	{
		printf(&quot;Failed to retrieve 'KSK@AARDVARK'\n&quot;);
		<font color="#3300FF">fcpDestroyHandle</font>(hfcp);
		exit(1);
	}

	// write key to stdout
	printf(&quot;Here is your key, Sir/Madam:\n&quot;);
	puts(data);

	// Finished with FCP handle
	<font color="#3300FF">fcpDestroyHandle</font>(hfcp);

	exit(0);

}		// 'main()'
</font><br></font></pre>
</blockquote>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="putkeyfrommem"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpPutKeyFromMem</font><font size="4">(<font color="#3300FF">HFCP 
  *<i><font color="#000000">hfcp</font></i></font>, <font color="#3300FF">char 
  *<font color="#000000"><i>name</i></font></font>, <font color="#3300FF">char 
  *</font><i>data</i>, <font color="#3300FF">char *</font><i>metadata</i>, <font color="#3300FF">char 
  **</font><i>pUri</i>)</font></font></p>
<p><font face="Arial, Helvetica, sans-serif"><b>Brief</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Write a key and/or metadata from 
    memory</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Arguments</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif"><b><i>hfcp</i></b> - an FCP handle, 
    previously created by calling <a href="#createhandle">fcpCreateHandle()</a></font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>name</i></b> - URI to insert 
    this key under. If NULL, then key is inserted as a CHK, whose name is returned 
    in <b><i>uri</i></b>.</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>data</i></b> - location of 
    raw key data in memory. If NULL, then key is created with no data.</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>metadata</i></b> - location 
    in memory of key's metadata. If NULL, then key will be created with no metadata.</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>uri</i></b> - location into 
    which the created key's name will be written (see example). If NULL, then 
    the key's URI will be forgotten.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Returns</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">0 if key was inserted successfully, 
    non-zero if failed (see errors).</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Description</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">This is a mindlessly easy way to 
    create a Freenet key. Just create a key in memory, then call this function 
    to insert it into Freenet.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Example</b></font></p>
<blockquote> 
  <pre><font face="Arial, Helvetica, sans-serif"><font face="Courier New, Courier, mono">#include &lt;sys/types.h&gt;<br>#include &lt;winsock.h&gt;
#include &quot;<font color="#3300FF">ezfcplib.h</font>&quot;

int main(int argc, char *argv[])
{
	HFCP *hfcp;
	char *data = &quot;This is a freenet key&quot;;
	char uri[128];			// this is big enough for Freenet URIs.

	// Start up FCP interface
	if (<font color="#3300FF">fcpStartup</font>(&quot;localhost&quot;, 8082, 60) != 0)
	{
		printf(&quot;fcpStartup failed\n&quot;);
		exit(1);
	}

	// Create an FCP handle
	if ((hfcp = <font color="#3300FF">fcpCreateHandle</font>()) == NULL)
	{
		printf(&quot;Failed to create FCP handle\n&quot;);
		return -1;
	}

	// Try to insert a key
	if (<font color="#3300FF">fcpPutKeyFromMem</font>(hfcp, &quot;KSK@my-own-key&quot;, data, uri) != 0)
	{
		printf(&quot;Failed to insert KSK@my-own-key'\n&quot;);
		<font color="#3300FF">fcpDestroyHandle</font>(hfcp);
		exit(1);
	}

	// write key's name to stdout
	printf(&quot;Key created successfully with URI '%s'\n&quot;, uri);

	// Finished with FCP handle
	<font color="#3300FF">fcpDestroyHandle</font>(hfcp);

	exit(0);

}		// 'main()'
</font><br></font></pre>
</blockquote>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="getkeytofile"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpGetKeyToFile</font><font size="4">(<font color="#3300FF">HFCP 
  *<font color="#000000"><i>hfcp</i></font></font><font color="#000000">,</font> 
  <font color="#3300FF">char *</font><i>key</i>, <font color="#3300FF">char *</font><i>file</i>, 
  <font color="#3300FF">char **</font><i>pMetadata</i>)</font></font></p>
<p><font face="Arial, Helvetica, sans-serif"><b>Brief</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Read a key and saves it to a file.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Arguments</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif"><b><i>hfcp</i></b> - an FCP handle, 
    previously created by calling <a href="#createhandle">fcpCreateHandle()</a></font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>key</i></b> - pointer to 
    a char string containing a valid Freenet URI (eg '<a href="http://127.0.0.1:8081/KSK@AARDVARK">freenet:KSK@AARDVARK</a>')</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>file</i></b> - string - a 
    full pathname of a file to which to write the key's data. Note - all directories 
    in the path must already exist.</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>pMetadata</i></b> - pointer 
    to a pointer to the received key's metadata (again see example). If this argument 
    is NULL, then the key's metadata will be discarded</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Returns</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">0 if the key was successfully read; 
    nonzero if there was a failure (see error descriptions).</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Description</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Retrieving a key from Freenet has 
    never been this easy! This function will request a key from Freenet, using 
    the default HTL (see <a href="#startup">fcpStartup()</a> ), or the FCP handle's 
    own HTL (see <a href="#sethtl">fcpSetHtl()</a>).</font></p>
  <p><font face="Arial, Helvetica, sans-serif">If the key can be retrieved, its 
    entire contents will be written, in binary form, to the <b><i>file</i></b><i> 
    </i>nominated by the caller, and the metadata will be written to memory, with 
    the locations of this metadata being written to <i> <b>pMetadata</b></i>.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">Note that <b><i>pMetadata </i></b>is 
    <a href="http://msdn.microsoft.com/library/devprods/vs6/visualc/vccore/_crt_malloc.htm">malloc()</a>ed. 
    To prevent memory leaks, you should <a href="http://msdn.microsoft.com/library/devprods/vs6/visualc/vccore/_crt_free.htm">free()</a> 
    it when you're finished with it.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">As regards Freenet metadata - metadata 
    commands like redirects, date-based redirects and file splits are handled 
    automagically and transparently.</font></p>
  <p><font face="Arial, Helvetica, sans-serif">CAUTION - be careful with this 
    function. Some Freenet keys can be up to a gigabyte or more in size. Unless 
    you basically know what kind of key you are retrieving, make sure you've got 
    plenty of free disk space.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Example</b></font></p>
<blockquote> 
  <pre><font face="Arial, Helvetica, sans-serif"><font face="Courier New, Courier, mono">#include &lt;sys/types.h&gt;<br>#include &lt;winsock.h&gt;
#include &quot;<font color="#3300FF">ezfcplib.h</font>&quot;

int main(int argc, char *argv[])
{
	HFCP *hfcp;		// FCP handle pointer
	char *metadata;	// for Freenet key's metadata

	// Start up FCP interface
	if (<font color="#3300FF">fcpStartup</font>(&quot;localhost&quot;, 8082, 60) != 0)
	{
		printf(&quot;fcpStartup failed\n&quot;);
		exit(1);
	}

	// Create an FCP handle
	if ((hfcp = <font color="#3300FF">fcpCreateHandle</font>()) == NULL)
	{
		printf(&quot;Failed to create FCP handle\n&quot;);
		return -1;
	}

	// Try to fetch a key
	if (<font color="#3300FF">fcpGetKeyToMem</font>(hfcp, &quot;KSK@AARDVARK&quot;, &quot;C:\\aardvark.txt&quot;, &amp;metadata) != 0)
	{
		printf(&quot;Failed to retrieve 'KSK@AARDVARK'\n&quot;);
		<font color="#3300FF">fcpDestroyHandle</font>(hfcp);
		exit(1);
	}

	// write key to stdout
	printf(&quot;Successfully retrieved key to c:\aardvark.html - metadata follows:\n&quot;);
	puts(metadata);

	// Finished with FCP handle
	<font color="#3300FF">fcpDestroyHandle</font>(hfcp);

	exit(0);

}		// 'main()'</font><br></font></pre>
</blockquote>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="putkeyfromfile"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpPutKeyFromFile</font><font size="4">(<font color="#3300FF">HFCP 
  *</font><i>hfcp</i>, <font color="#3300FF">char *<font color="#000000">name</font></font>, 
  <font color="#3300FF">char *</font><i>file</i>, <font color="#3300FF">char *</font><i>metadata</i>, 
  <font color="#3300FF">char *</font><i>uri</i>)</font></font></p>
<p><font face="Arial, Helvetica, sans-serif">Insert the contents of a file into 
  Freenet</font></p>
<p><font face="Arial, Helvetica, sans-serif"><b>Brief</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Insert the contents of a file into 
    Freenet</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Arguments</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif"><b><i>hfcp</i></b> - an FCP handle, 
    previously created by calling <a href="#createhandle">fcpCreateHandle()</a></font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>name</i></b> - URI to insert 
    this key under. If NULL, then key is inserted as a CHK, whose name is returned 
    in <b><i>uri</i></b>.</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>file</i></b> - full pathname 
    of a file to be inserted into Freenet. The syntax of this pathname must obey 
    the requirements of the host operating system.</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>metadata</i></b> - location 
    in memory of key's metadata. If NULL, then key will be created with no metadata.</font></p>
  <p><font face="Arial, Helvetica, sans-serif"><b><i>uri</i></b> - location into 
    which the created key's name will be written (see example). If NULL, then 
    the key's URI will be forgotten.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Returns</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">0 if key was inserted successfully, 
    non-zero if failed (see errors).</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Description</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">This is another mindlessly easy 
    way to create a Freenet key.<br>
    Just create a file, then call this function to insert it into Freenet.</font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif"><b>Example</b></font></p>
<blockquote> 
  <pre><font face="Arial, Helvetica, sans-serif"><font face="Courier New, Courier, mono">#include &lt;sys/types.h&gt;<br>#include &lt;winsock.h&gt;
#include &lt;stdio.h&gt;
#include &quot;<font color="#3300FF">ezfcplib.h</font>&quot;

int main(int argc, char *argv[])
{
	FILE *fp;
	HFCP *hfcp;
	char uri[128];			// this is big enough for Freenet URIs.
	char *filename = &quot;c:\\myfile.txt&quot;;

	// Start up FCP interface
	if (<font color="#3300FF">fcpStartup</font>(&quot;localhost&quot;, 8082, 60) != 0)
	{
		printf(&quot;fcpStartup failed\n&quot;);
		exit(1);
	}

	// Create an FCP handle
	if ((hfcp = <font color="#3300FF">fcpCreateHandle</font>()) == NULL)
	{
		printf(&quot;Failed to create FCP handle\n&quot;);
		return -1;
	}

	// Create a file
	if ((fp = fopen(filename, &quot;wt&quot;)) == NULL)
	{
		printf(&quot;Failed to create file\n&quot;);
		exit(1);
	}
	fprintf(fp, &quot;This is the first line of the file\n&quot;);
	fprintf(fp, &quot;This is another line for the file\n&quot;);
	fclose(fp);

	// Try to insert the file as a key
	if (<font color="#3300FF">fcpPutKeyFromMem</font>(hfcp, &quot;KSK@my-own-key&quot;, filename, uri) != 0)
	{
		printf(&quot;Failed to insert KSK@my-own-key'\n&quot;);
		<font color="#3300FF">fcpDestroyHandle</font>(hfcp);
		exit(1);
	}

	// write key's name to stdout
	printf(&quot;Key created successfully with URI '%s'\n&quot;, uri);

	// Finished with FCP handle
	<font color="#3300FF">fcpDestroyHandle</font>(hfcp);

	exit(0);

}		// 'main()'<br></font></font></pre>
</blockquote>
<hr>
<font size="5" face="Arial, Helvetica, sans-serif"><b>Key Index Function Descriptions</b></font> 
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="openkeyindex"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpOpenKeyIndex</font><font size="4">(<font color="#0000FF">HFCP 
  *</font><i>hfcp</i>, <font color="#3300FF">char *</font><i>name, </i><font color="#3300FF">char 
  *</font><i>date</i>)</font></font></p>
<p><b><font face="Arial, Helvetica, sans-serif" size="3">Brief</font></b></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Open an in-freenet key index for 
    reading</font></p>
</blockquote>
<p><b><font face="Arial, Helvetica, sans-serif">Arguments</font></b></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif"><b><i>hfcp</i></b> - an FCP handle, 
    previously created by calling <a href="#createhandle">fcpCreateHandle()</a></font></p>
  <p><b><i>name</i></b> - name of key index to open</p>
  <p><b><i>date</i></b> - date from which to read keys, in the format </p>
</blockquote>
<p><b>Returns</b></p>
<blockquote> 
  <p><b>0</b> if successful, non-zero otherwise (see <a href="#errors">errors</a>)</p>
</blockquote>
<p><b>Description</b></p>
<blockquote>
  <p>&nbsp;</p>
</blockquote>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="readkeyindex"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpReadKeyIndex</font><font size="4">(<font color="#3300FF">HFCP 
  *</font><i>hfcp</i>)</font></font></p>
<p><font face="Arial, Helvetica, sans-serif">Read the next key from a previously 
  opened key index</font></p>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="writekeyindex"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpWriteKeyIndex</font><font size="4">(<font color="#3300FF">HFCP 
  *</font><i>hfcp</i>, <font color="#3300FF">char *</font><i>indexname</i>, <font color="#3300FF">char 
  *</font><i>data</i>)</font></font></p>
<p><font face="Arial, Helvetica, sans-serif">Write an entry to an in-Freenet key 
  index</font></p>
<hr>
<font face="Arial, Helvetica, sans-serif" size="5"><b>Key Creation Functions</b></font> 
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="makechkfrommem"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpMakeChkFromMem</font><font size="4">()</font></font></p>
<p> <font face="Arial, Helvetica, sans-serif">Create a CHK value from data in 
  memory</font></p>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="makechkfromfile"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpMakeChkFromFile</font><font size="4">()</font></font></p>
<p><font face="Arial, Helvetica, sans-serif">Create a CHK value from data in a 
  file</font></p>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="makesvkkeypair"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpMakeSvkKeypair</font><font size="4">()</font></font></p>
<p><font face="Arial, Helvetica, sans-serif">Generate an SVK keypair</font></p>
<hr>
<font size="5" face="Arial, Helvetica, sans-serif"><b>Low Level Key Key Streaming 
Functions</b></font> 
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="openkey"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpOpenKey</font><font size="4">(<font color="#3300FF">HFCP 
  *</font><i>hfcp</i>, <font color="#3300FF">char *</font><i>key</i>, <font color="#3300FF">int</font> 
  <i>mode</i>)</font></font></p>
<p><font face="Arial, Helvetica, sans-serif"><b>Brief</b></font></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Open a key for reading or writing 
    (like Unix open())</font></p>
</blockquote>
<p><b><font face="Arial, Helvetica, sans-serif">Arguments</font></b></p>
<blockquote> 
  <p><b><i><font face="Arial, Helvetica, sans-serif">hfcp</font></i></b><font face="Arial, Helvetica, sans-serif"> 
    - FCP 'handle', as previously created by calling <a href="#createhandle">fcpCreateHandle()</a></font></p>
  <p><b><i><font face="Arial, Helvetica, sans-serif">key</font></i></b><font face="Arial, Helvetica, sans-serif"> 
    - text string containing a Freenet URI for the key to open.</font></p>
  <p><b><i><font face="Arial, Helvetica, sans-serif">mode</font></i></b><i><font face="Arial, Helvetica, sans-serif"> 
    - </font></i><font face="Arial, Helvetica, sans-serif">flags indicating the 
    modes under which the key is to be opened. These are:</font></p>
  <blockquote> 
    <p><b><font face="Arial, Helvetica, sans-serif">_FCP_O_READ</font></b><font face="Arial, Helvetica, sans-serif"> 
      - open an existing Freenet key for reading<br>
      <b>_FCP_O_WRITE</b> - create a new Freenet key for writing<br>
      <b>_FCP_O_RAW</b> - disable automatic handling of metadata (enabled by default)</font></p>
  </blockquote>
</blockquote>
<p><b><font face="Arial, Helvetica, sans-serif">Returns</font></b></p>
<blockquote> 
  <p><b><font face="Arial, Helvetica, sans-serif">0 </font></b><font face="Arial, Helvetica, sans-serif">if 
    the key was successfully opened<br>
    <b>nonzero</b> if an error occurred</font></p>
</blockquote>
<p><b><font face="Arial, Helvetica, sans-serif">Description</font></b></p>
<blockquote> 
  <p>This layer of <b>ezFCPlib</b> provides a low-level streaming access to Freenet 
    keys that strongly resembles the familiar Unix functions <b>open()/close()/read()/write()</b>. 
    It is used by the higher-level ezFCPlib functions.</p>
  <p>The <b><i>mode</i></b> flags should be <b>OR</b>-ed together. However, please 
    note that it is illegal to combine the <b>_FCP_O_READ</b> and <b>_FCP_O_WRITE</b> 
    flags in the same operation - read/write access is not a concept which exists 
    in Freenet, and will result in this function returning an error.</p>
</blockquote>
<p>&nbsp;</p>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="closekey"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpCloseKey</font><font size="4">(<font color="#3300FF">HFCP 
  *</font><i>hfcp</i>)</font></font></p>
<p><font face="Arial, Helvetica, sans-serif">Close a previously open key (like 
  Unix close())</font></p>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="readkey"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpReadKey</font><font size="4">(<font color="#3300FF">HFCP 
  *</font><i>hfcp</i>, <font color="#3300FF">char *</font><i>buf</i>, <font color="#3300FF">int</font> 
  <i>count</i>)</font></font></p>
<p><b><font face="Arial, Helvetica, sans-serif">Brief</font></b></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif">Reads an arbitrary number of bytes 
    from a key (like Unix read())</font></p>
</blockquote>
<p><b><font face="Arial, Helvetica, sans-serif">Arguments</font></b></p>
<blockquote> 
  <p><font face="Arial, Helvetica, sans-serif"><b><i>hfcp</i></b> - an FCP handle, 
    previously created by calling <a href="#createhandle">fcpCreateHandle()</a></font></p>
  <p><b><i>buf</i> </b>- pointer to a buffer that's large enough to hold the requested 
    number of bytes</p>
  <p><b><i>count </i></b>- number of bytes requested</p>
</blockquote>
<p><b>Returns</b></p>
<blockquote> 
  <p>Number of bytes actually read, or -1 if a problem occurred</p>
</blockquote>
<p><b>Description</b></p>
<blockquote>
  <p>This function attempts to read an arbitrary number of bytes from a key which 
    has been previously 'opened' via the fcpOpenKey() function.</p>
  <p>&nbsp;</p>
</blockquote>
<hr>
<font face="Arial, Helvetica, sans-serif"><b><a name="writekey"></a></b></font> 
<p><font face="Arial, Helvetica, sans-serif"><b><br>
  </b><font size="4" color="#339900">fcpWriteKey</font><font size="4">()</font></font></p>
<p><font face="Arial, Helvetica, sans-serif">Writes an arbitrary number of bytes 
  to a key (like Unix write())</font></p>
<p><a name="requiredclientcallbackfunction"></a></p>
<hr>
<font face="Arial, Helvetica, sans-serif"><font size="5" color="#000000"><b>Required 
Client Callback Function</b></font></font> 
<hr>
<p><font face="Arial, Helvetica, sans-serif">For most of these functions, the 
  client program must supply a logging function called <b><font face="Courier New, Courier, mono">fcpLogCallback()</font></b>.</font></p>
<p><font face="Arial, Helvetica, sans-serif">Since the user interface - whether 
  scripts, console, socket, GUI etc - is under the control of the client, it's 
  the client's responsibility to decide how to dispose of the various status and 
  error messages that arise from calling ezFCPlib functions.</font></p>
<p><font face="Arial, Helvetica, sans-serif">When the client program calls some 
  of the ezFCPlib functions, some of these functions may make calls to fcpLogCallback().</font></p>
<p><font face="Arial, Helvetica, sans-serif">The required definition of <b>fcpLogCallback()</b> 
  is</font></p>
<blockquote>
  <p><font face="Courier New, Courier, mono" color="#0000FF">int</font><font face="Courier New, Courier, mono"> 
    <b>fcpLogCallback</b>(<font color="#0000CC">int</font> level, <font color="#0000FF">char</font> 
    <font color="#0000FF">*</font><b>buf</b>)<br>
    <b>{</b> /* do something with text log message in buf */ <b>}</b></font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif">The '<b><font face="Courier New, Courier, mono" size="2">level</font></b>' 
  argument indicates the importance of the log message. This allows your application 
  to 'screen' log messages according to importance (or desired user settings).</font></p>
<p><font face="Arial, Helvetica, sans-serif">The logging levels are defined in 
  ezFCPlib.h as:</font></p>
<blockquote> 
  <p><font face="Courier New, Courier, mono" size="2">#define <b>FCP_LOG_SILENT</b> 
    <b>0</b> <font color="#666666">// don't log</font><br>
    #define <b>FCP_LOG_CRITICAL</b> <b>1</b> <font color="#666666">// critical 
    messages, eg failures</font><br>
    #define <b>FCP_LOG_NORMAL</b> <b>2</b> <font color="#666666">// default log 
    level - interesting progress messages</font><br>
    #define <b>FCP_LOG_VERBOSE</b> <font color="#000000"><b>3</b></font> <font color="#666666">// 
    more detailed progress information</font><br>
    #define <b>FCP_LOG_DEBUG</b> <b>4</b> <font color="#666666">// voluminous 
    commentary - for detailed debugging</font></font></p>
</blockquote>
<p><font face="Arial, Helvetica, sans-serif">For examples of this callback function, 
  refer to the <b>fcpget.c</b> and <b>fcpput.c</b> source files</font></p>
<p><font face="Arial, Helvetica, sans-serif"><a name="errors"></a></font></p>
<hr>
<font face="Arial, Helvetica, sans-serif" size="5"><b>Error Codes</b></font> 
<hr>
<p>&nbsp;</p>
<p><font face="Arial, Helvetica, sans-serif"><a name="demo"></a></font></p>
<hr>
<font face="Arial, Helvetica, sans-serif" size="5"><b>Demo Program</b></font> 
<hr>
<p><font face="Arial, Helvetica, sans-serif">You should already have the source 
  of this program with the library and header.</font></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
